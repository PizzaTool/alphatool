import{h as e,p as s,d as o,q as a,j as t,E as n,c as l,g as r,P as u,v as i,w as d,V as p,a as c,Q as f,u as m,x as g,a2 as y,t as v,W as b,X as C,N as h,Y as x,b1 as S,r as w,U as T,o as B,s as N,k as _,b as $,l as k,F as E,a8 as L,at as I,Z as M,b2 as z,$ as j,al as H,ad as A,ao as D,b3 as U,b4 as Z,b5 as F}from"./index.js";import{_ as O,a as R,m as q,i as P,T as Q,e as V,u as W,E as X,j as Y,c as G}from"./aria.js";const J=e({value:{type:[String,Number],default:""},max:{type:Number,default:99},isDot:Boolean,hidden:Boolean,type:{type:String,values:["primary","success","warning","info","danger"],default:"danger"},showZero:{type:Boolean,default:!0},color:String,badgeStyle:{type:s([String,Object,Array])},offset:{type:s(Array),default:[0,0]},badgeClass:{type:String}}),K=o({name:"ElBadge"});const ee=h(O(o({...K,props:J,setup(e,{expose:s}){const o=e,h=a("badge"),x=t((()=>o.isDot?"":n(o.value)&&n(o.max)&&o.max<o.value?`${o.max}+`:`${o.value}`)),S=t((()=>{var e,s,a,t,n;return[{backgroundColor:o.color,marginRight:R(-(null!=(s=null==(e=o.offset)?void 0:e[0])?s:0)),marginTop:R(null!=(t=null==(a=o.offset)?void 0:a[1])?t:0)},null!=(n=o.badgeStyle)?n:{}]}));return s({content:x}),(e,s)=>(r(),l("div",{class:g(m(h).b())},[u(e.$slots,"default"),i(C,{name:`${m(h).namespace.value}-zoom-in-center`,persisted:""},{default:d((()=>[p(c("sup",{class:g([m(h).e("content"),m(h).em("content",e.type),m(h).is("fixed",!!e.$slots.default),m(h).is("dot",e.isDot),m(h).is("hide-zero",!e.showZero&&0===o.value),e.badgeClass]),style:f(m(S))},[u(e.$slots,"content",{value:m(x)},(()=>[y(v(m(x)),1)]))],6),[[b,!e.hidden&&(m(x)||e.isDot||e.$slots.content)]])])),_:3},8,["name"])],2))}}),[["__file","badge.vue"]])),se=["primary","success","info","warning","error"],oe=q({customClass:"",dangerouslyUseHTMLString:!1,duration:3e3,icon:void 0,id:"",message:"",onClose:void 0,showClose:!1,type:"info",plain:!1,offset:16,zIndex:0,grouping:!1,repeatNum:1,appendTo:x?document.body:void 0}),ae=e({customClass:{type:String,default:oe.customClass},dangerouslyUseHTMLString:{type:Boolean,default:oe.dangerouslyUseHTMLString},duration:{type:Number,default:oe.duration},icon:{type:P,default:oe.icon},id:{type:String,default:oe.id},message:{type:s([String,Object,Function]),default:oe.message},onClose:{type:s(Function),default:oe.onClose},showClose:{type:Boolean,default:oe.showClose},type:{type:String,values:se,default:oe.type},plain:{type:Boolean,default:oe.plain},offset:{type:Number,default:oe.offset},zIndex:{type:Number,default:oe.zIndex},grouping:{type:Boolean,default:oe.grouping},repeatNum:{type:Number,default:oe.repeatNum}}),te=S([]),ne=e=>{const{prev:s}=(e=>{const s=te.findIndex((s=>s.id===e)),o=te[s];let a;return s>0&&(a=te[s-1]),{current:o,prev:a}})(e);return s?s.vm.exposed.bottom.value:0},le=o({name:"ElMessage"});var re=O(o({...le,props:ae,emits:{destroy:()=>!0},setup(e,{expose:s,emit:o}){const a=e,{Close:n}=Y,y=w(!1),{ns:h,zIndex:x}=T("message"),{currentZIndex:S,nextZIndex:z}=x,j=w(),H=w(!1),A=w(0);let D;const U=t((()=>a.type?"error"===a.type?"danger":a.type:"info")),Z=t((()=>{const e=a.type;return{[h.bm("icon",e)]:e&&Q[e]}})),F=t((()=>a.icon||Q[a.type]||"")),O=t((()=>ne(a.id))),R=t((()=>((e,s)=>te.findIndex((s=>s.id===e))>0?16:s)(a.id,a.offset)+O.value)),q=t((()=>A.value+R.value)),P=t((()=>({top:`${R.value}px`,zIndex:S.value})));function J(){0!==a.duration&&({stop:D}=I((()=>{se()}),a.duration))}function K(){null==D||D()}function se(){H.value=!1,M((()=>{var e;y.value||(null==(e=a.onClose)||e.call(a),o("destroy"))}))}return B((()=>{J(),z(),H.value=!0})),N((()=>a.repeatNum),(()=>{K(),J()})),V(document,"keydown",(function({code:e}){e===G.esc&&se()})),W(j,(()=>{A.value=j.value.getBoundingClientRect().height})),s({visible:H,bottom:q,close:se}),(e,s)=>(r(),_(C,{name:m(h).b("fade"),onBeforeEnter:e=>y.value=!0,onBeforeLeave:e.onClose,onAfterLeave:s=>e.$emit("destroy"),persisted:""},{default:d((()=>[p(c("div",{id:e.id,ref_key:"messageRef",ref:j,class:g([m(h).b(),{[m(h).m(e.type)]:e.type},m(h).is("closable",e.showClose),m(h).is("plain",e.plain),e.customClass]),style:f(m(P)),role:"alert",onMouseenter:K,onMouseleave:J},[e.repeatNum>1?(r(),_(m(ee),{key:0,value:e.repeatNum,type:m(U),class:g(m(h).e("badge"))},null,8,["value","type","class"])):$("v-if",!0),m(F)?(r(),_(m(X),{key:1,class:g([m(h).e("icon"),m(Z)])},{default:d((()=>[(r(),_(k(m(F))))])),_:1},8,["class"])):$("v-if",!0),u(e.$slots,"default",{},(()=>[e.dangerouslyUseHTMLString?(r(),l(E,{key:1},[$(" Caution here, message could've been compromised, never use user's input as message "),c("p",{class:g(m(h).e("content")),innerHTML:e.message},null,10,["innerHTML"])],2112)):(r(),l("p",{key:0,class:g(m(h).e("content"))},v(e.message),3))])),e.showClose?(r(),_(m(X),{key:2,class:g(m(h).e("closeBtn")),onClick:L(se,["stop"])},{default:d((()=>[i(m(n))])),_:1},8,["class","onClick"])):$("v-if",!0)],46,["id"]),[[b,H.value]])])),_:3},8,["name","onBeforeEnter","onBeforeLeave","onAfterLeave"]))}}),[["__file","message.vue"]]);let ue=1;const ie=e=>{const s=!e||j(e)||H(e)||A(e)?{message:e}:e,o={...oe,...s};if(o.appendTo){if(j(o.appendTo)){let e=document.querySelector(o.appendTo);Z(e)||(e=document.body),o.appendTo=e}}else o.appendTo=document.body;return D(z.grouping)&&!o.grouping&&(o.grouping=z.grouping),n(z.duration)&&3e3===o.duration&&(o.duration=z.duration),n(z.offset)&&16===o.offset&&(o.offset=z.offset),D(z.showClose)&&!o.showClose&&(o.showClose=z.showClose),D(z.plain)&&!o.plain&&(o.plain=z.plain),o},de=({appendTo:e,...s},o)=>{const a="message_"+ue++,t=s.onClose,n=document.createElement("div"),l={...s,id:a,onClose:()=>{null==t||t(),(e=>{const s=te.indexOf(e);if(-1===s)return;te.splice(s,1);const{handler:o}=e;o.close()})(p)},onDestroy:()=>{U(null,n)}},r=i(re,l,A(l.message)||H(l.message)?{default:A(l.message)?l.message:()=>l.message}:null);r.appContext=o||pe._context,U(r,n),e.appendChild(n.firstElementChild);const u=r.component,d={close:()=>{u.exposed.close()}},p={id:a,vnode:r,vm:u,handler:d,props:r.component.props};return p},pe=(e={},s)=>{if(!x)return{close:()=>{}};const o=ie(e);if(o.grouping&&te.length){const e=te.find((({vnode:e})=>{var s;return(null==(s=e.props)?void 0:s.message)===o.message}));if(e)return e.props.repeatNum+=1,e.props.type=o.type,e.handler}if(n(z.max)&&te.length>=z.max)return{close:()=>{}};const a=de(o,s);return te.push(a),a.handler};se.forEach((e=>{pe[e]=(s={},o)=>{const a=ie(s);return pe({...a,type:e},o)}})),pe.closeAll=function(e){const s=[...te];for(const o of s)e&&e!==o.props.type||o.handler.close()},pe._context=null;const ce=F(pe,"$message");export{ce as E};
