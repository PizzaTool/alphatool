import{Y as e,E as t,$ as a,h as o,p as n,K as l,j as s,aP as i,G as r,a5 as u,r as d,s as p,ad as c,Z as f,d as v,aL as m,au as h,q as x,aQ as g,aR as y,ax as b,o as w,aO as C,c as S,g as E,b as k,F as z,a as F,x as I,u as P,P as B,k as $,w as N,l as R,av as V,v as _,ah as M,a8 as j,an as A,t as T,Q as L,a0 as O,N as H}from"./index.js";import{m as K,i as W,e as U,_ as q,V as Q,u as Y,E as Z}from"./aria.js";import{U as D,g as G,v as J,e as X,q as ee,b as te,c as ae,d as oe,I as ne,C as le}from"./el-popper.js";const se=()=>e&&/firefox/i.test(window.navigator.userAgent);let ie;const re={height:"0",visibility:"hidden",overflow:se()?"":"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0"},ue=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing"];function de(e,a=1,o){var n;ie||(ie=document.createElement("textarea"),document.body.appendChild(ie));const{paddingSize:l,borderSize:s,boxSizing:i,contextStyle:r}=function(e){const t=window.getComputedStyle(e),a=t.getPropertyValue("box-sizing"),o=Number.parseFloat(t.getPropertyValue("padding-bottom"))+Number.parseFloat(t.getPropertyValue("padding-top")),n=Number.parseFloat(t.getPropertyValue("border-bottom-width"))+Number.parseFloat(t.getPropertyValue("border-top-width"));return{contextStyle:ue.map((e=>[e,t.getPropertyValue(e)])),paddingSize:o,borderSize:n,boxSizing:a}}(e);r.forEach((([e,t])=>null==ie?void 0:ie.style.setProperty(e,t))),Object.entries(re).forEach((([e,t])=>null==ie?void 0:ie.style.setProperty(e,t,"important"))),ie.value=e.value||e.placeholder||"";let u=ie.scrollHeight;const d={};"border-box"===i?u+=s:"content-box"===i&&(u-=l),ie.value="";const p=ie.scrollHeight-l;if(t(a)){let e=p*a;"border-box"===i&&(e=e+l+s),u=Math.max(e,u),d.minHeight=`${e}px`}if(t(o)){let e=p*o;"border-box"===i&&(e=e+l+s),u=Math.min(e,u)}return d.height=`${u}px`,null==(n=ie.parentNode)||n.removeChild(ie),ie=void 0,d}const pe=o({id:{type:String,default:void 0},size:l,disabled:Boolean,modelValue:{type:n([String,Number,Object]),default:""},maxlength:{type:[String,Number]},minlength:{type:[String,Number]},type:{type:String,default:"text"},resize:{type:String,values:["none","both","horizontal","vertical"]},autosize:{type:n([Boolean,Object]),default:!1},autocomplete:{type:String,default:"off"},formatter:{type:Function},parser:{type:Function},placeholder:{type:String},form:{type:String},readonly:Boolean,clearable:Boolean,showPassword:Boolean,showWordLimit:Boolean,suffixIcon:{type:W},prefixIcon:{type:W},containerRole:{type:String,default:void 0},tabindex:{type:[String,Number],default:0},validateEvent:{type:Boolean,default:!0},inputStyle:{type:n([Object,Array,String]),default:()=>K({})},autofocus:Boolean,rows:{type:Number,default:2},...G(["ariaLabel"])}),ce={[D]:e=>a(e),input:e=>a(e),change:e=>a(e),focus:e=>e instanceof FocusEvent,blur:e=>e instanceof FocusEvent,clear:()=>!0,mouseleave:e=>e instanceof MouseEvent,mouseenter:e=>e instanceof MouseEvent,keydown:e=>e instanceof Event,compositionstart:e=>e instanceof CompositionEvent,compositionupdate:e=>e instanceof CompositionEvent,compositionend:e=>e instanceof CompositionEvent},fe=["class","style"],ve=/^on[A-Z]/,me=(e={})=>{const{excludeListeners:t=!1,excludeKeys:a}=e,o=s((()=>((null==a?void 0:a.value)||[]).concat(fe))),n=r();return s(n?()=>{var e;return i(Object.entries(null==(e=n.proxy)?void 0:e.$attrs).filter((([e])=>!(o.value.includes(e)||t&&ve.test(e)))))}:()=>({}))};function he(e,{beforeFocus:t,afterFocus:a,beforeBlur:o,afterBlur:n}={}){const l=r(),{emit:s}=l,i=u(),f=J("disabled"),v=d(!1),m=e=>{!!c(t)&&t(e)||v.value||(v.value=!0,s("focus",e),null==a||a())},h=e=>{var t;!!c(o)&&o(e)||e.relatedTarget&&(null==(t=i.value)?void 0:t.contains(e.relatedTarget))||(v.value=!1,s("blur",e),null==n||n())};return p([i,f],(([e,t])=>{e&&(t?e.removeAttribute("tabindex"):e.setAttribute("tabindex","-1"))})),U(i,"focus",m,!0),U(i,"blur",h,!0),U(i,"click",(()=>{var t,a;(null==(t=i.value)?void 0:t.contains(document.activeElement))&&i.value!==document.activeElement||f.value||null==(a=e.value)||a.focus()}),!0),{isFocused:v,wrapperRef:i,handleFocus:m,handleBlur:h}}function xe({afterComposition:e,emit:t}){const a=d(!1),o=e=>{var o;null==t||t("compositionupdate",e);const n=null==(o=e.target)?void 0:o.value,l=n[n.length-1]||"";a.value=!(e=>/([\uAC00-\uD7AF\u3130-\u318F])+/gi.test(e))(l)},n=o=>{null==t||t("compositionend",o),a.value&&(a.value=!1,f((()=>e(o))))};return{isComposing:a,handleComposition:e=>{"compositionend"===e.type?n(e):o(e)},handleCompositionStart:e=>{null==t||t("compositionstart",e),a.value=!0},handleCompositionUpdate:o,handleCompositionEnd:n}}const ge=v({name:"ElInput",inheritAttrs:!1});const ye=H(q(v({...ge,props:pe,emits:ce,setup(t,{expose:a,emit:o}){const n=t,l=m(),i=me(),r=h(),c=s((()=>["textarea"===n.type?J.b():G.b(),G.m(U.value),G.is("disabled",q.value),G.is("exceed",Ne.value),{[G.b("group")]:r.prepend||r.append,[G.m("prefix")]:r.prefix||n.prefixIcon,[G.m("suffix")]:r.suffix||n.suffixIcon||n.clearable||n.showPassword,[G.bm("suffix","password-clear")]:Ie.value&&Pe.value,[G.b("hidden")]:"hidden"===n.type},l.class])),v=s((()=>[G.e("wrapper"),G.is("focus",ge.value)])),{form:H,formItem:K}=te(),{inputId:W}=ae(n,{formItemContext:K}),U=X(),q=ee(),G=x("input"),J=x("textarea"),se=u(),ie=u(),re=d(!1),ue=d(!1),pe=d(),ce=u(n.inputStyle),fe=s((()=>se.value||ie.value)),{wrapperRef:ve,isFocused:ge,handleFocus:ye,handleBlur:be}=he(fe,{beforeFocus:()=>q.value,afterBlur(){var e;n.validateEvent&&(null==(e=null==K?void 0:K.validate)||e.call(K,"blur").catch((e=>oe())))}}),we=s((()=>{var e;return null!=(e=null==H?void 0:H.statusIcon)&&e})),Ce=s((()=>(null==K?void 0:K.validateState)||"")),Se=s((()=>Ce.value&&Q[Ce.value])),Ee=s((()=>ue.value?g:y)),ke=s((()=>[l.style])),ze=s((()=>[n.inputStyle,ce.value,{resize:n.resize}])),Fe=s((()=>b(n.modelValue)?"":String(n.modelValue))),Ie=s((()=>n.clearable&&!q.value&&!n.readonly&&!!Fe.value&&(ge.value||re.value))),Pe=s((()=>n.showPassword&&!q.value&&!!Fe.value)),Be=s((()=>n.showWordLimit&&!!n.maxlength&&("text"===n.type||"textarea"===n.type)&&!q.value&&!n.readonly&&!n.showPassword)),$e=s((()=>Fe.value.length)),Ne=s((()=>!!Be.value&&$e.value>Number(n.maxlength))),Re=s((()=>!!r.suffix||!!n.suffixIcon||Ie.value||n.showPassword||Be.value||!!Ce.value&&we.value)),[Ve,_e]=function(e){let t;return[function(){if(null==e.value)return;const{selectionStart:a,selectionEnd:o,value:n}=e.value;if(null==a||null==o)return;const l=n.slice(0,Math.max(0,a)),s=n.slice(Math.max(0,o));t={selectionStart:a,selectionEnd:o,value:n,beforeTxt:l,afterTxt:s}},function(){if(null==e.value||null==t)return;const{value:a}=e.value,{beforeTxt:o,afterTxt:n,selectionStart:l}=t;if(null==o||null==n||null==l)return;let s=a.length;if(a.endsWith(n))s=a.length-n.length;else if(a.startsWith(o))s=o.length;else{const e=o[l-1],t=a.indexOf(e,l-1);-1!==t&&(s=t+1)}e.value.setSelectionRange(s,s)}]}(se);Y(ie,(e=>{if(je(),!Be.value||"both"!==n.resize)return;const t=e[0],{width:a}=t.contentRect;pe.value={right:`calc(100% - ${a+15+6}px)`}}));const Me=()=>{const{type:t,autosize:a}=n;if(e&&"textarea"===t&&ie.value)if(a){const e=O(a)?a.minRows:void 0,t=O(a)?a.maxRows:void 0,o=de(ie.value,e,t);ce.value={overflowY:"hidden",...o},f((()=>{ie.value.offsetHeight,ce.value=o}))}else ce.value={minHeight:de(ie.value).minHeight}},je=(e=>{let t=!1;return()=>{var a;if(t||!n.autosize)return;null===(null==(a=ie.value)?void 0:a.offsetParent)||(e(),t=!0)}})(Me),Ae=()=>{const e=fe.value,t=n.formatter?n.formatter(Fe.value):Fe.value;e&&e.value!==t&&(e.value=t)},Te=async e=>{Ve();let{value:t}=e.target;n.formatter&&n.parser&&(t=n.parser(t)),Oe.value||(t!==Fe.value?(o(D,t),o(ne,t),await f(),Ae(),_e()):Ae())},Le=e=>{let{value:t}=e.target;n.formatter&&n.parser&&(t=n.parser(t)),o(le,t)},{isComposing:Oe,handleCompositionStart:He,handleCompositionUpdate:Ke,handleCompositionEnd:We}=xe({emit:o,afterComposition:Te}),Ue=()=>{Ve(),ue.value=!ue.value,setTimeout(_e)},qe=e=>{re.value=!1,o("mouseleave",e)},Qe=e=>{re.value=!0,o("mouseenter",e)},Ye=e=>{o("keydown",e)},Ze=()=>{o(D,""),o(le,""),o("clear"),o(ne,"")};return p((()=>n.modelValue),(()=>{var e;f((()=>Me())),n.validateEvent&&(null==(e=null==K?void 0:K.validate)||e.call(K,"change").catch((e=>oe())))})),p(Fe,(()=>Ae())),p((()=>n.type),(async()=>{await f(),Ae(),Me()})),w((()=>{!n.formatter&&n.parser,Ae(),f(Me)})),a({input:se,textarea:ie,ref:fe,textareaStyle:ze,autosize:C(n,"autosize"),isComposing:Oe,focus:()=>{var e;return null==(e=fe.value)?void 0:e.focus()},blur:()=>{var e;return null==(e=fe.value)?void 0:e.blur()},select:()=>{var e;null==(e=fe.value)||e.select()},clear:Ze,resizeTextarea:Me}),(e,t)=>(E(),S("div",{class:I([P(c),{[P(G).bm("group","append")]:e.$slots.append,[P(G).bm("group","prepend")]:e.$slots.prepend}]),style:L(P(ke)),onMouseenter:Qe,onMouseleave:qe},[k(" input "),"textarea"!==e.type?(E(),S(z,{key:0},[k(" prepend slot "),e.$slots.prepend?(E(),S("div",{key:0,class:I(P(G).be("group","prepend"))},[B(e.$slots,"prepend")],2)):k("v-if",!0),F("div",{ref_key:"wrapperRef",ref:ve,class:I(P(v))},[k(" prefix slot "),e.$slots.prefix||e.prefixIcon?(E(),S("span",{key:0,class:I(P(G).e("prefix"))},[F("span",{class:I(P(G).e("prefix-inner"))},[B(e.$slots,"prefix"),e.prefixIcon?(E(),$(P(Z),{key:0,class:I(P(G).e("icon"))},{default:N((()=>[(E(),$(R(e.prefixIcon)))])),_:1},8,["class"])):k("v-if",!0)],2)],2)):k("v-if",!0),F("input",V({id:P(W),ref_key:"input",ref:se,class:P(G).e("inner")},P(i),{minlength:e.minlength,maxlength:e.maxlength,type:e.showPassword?ue.value?"text":"password":e.type,disabled:P(q),readonly:e.readonly,autocomplete:e.autocomplete,tabindex:e.tabindex,"aria-label":e.ariaLabel,placeholder:e.placeholder,style:e.inputStyle,form:e.form,autofocus:e.autofocus,role:e.containerRole,onCompositionstart:P(He),onCompositionupdate:P(Ke),onCompositionend:P(We),onInput:Te,onChange:Le,onKeydown:Ye}),null,16,["id","minlength","maxlength","type","disabled","readonly","autocomplete","tabindex","aria-label","placeholder","form","autofocus","role","onCompositionstart","onCompositionupdate","onCompositionend"]),k(" suffix slot "),P(Re)?(E(),S("span",{key:1,class:I(P(G).e("suffix"))},[F("span",{class:I(P(G).e("suffix-inner"))},[P(Ie)&&P(Pe)&&P(Be)?k("v-if",!0):(E(),S(z,{key:0},[B(e.$slots,"suffix"),e.suffixIcon?(E(),$(P(Z),{key:0,class:I(P(G).e("icon"))},{default:N((()=>[(E(),$(R(e.suffixIcon)))])),_:1},8,["class"])):k("v-if",!0)],64)),P(Ie)?(E(),$(P(Z),{key:1,class:I([P(G).e("icon"),P(G).e("clear")]),onMousedown:j(P(A),["prevent"]),onClick:Ze},{default:N((()=>[_(P(M))])),_:1},8,["class","onMousedown"])):k("v-if",!0),P(Pe)?(E(),$(P(Z),{key:2,class:I([P(G).e("icon"),P(G).e("password")]),onClick:Ue},{default:N((()=>[(E(),$(R(P(Ee))))])),_:1},8,["class"])):k("v-if",!0),P(Be)?(E(),S("span",{key:3,class:I(P(G).e("count"))},[F("span",{class:I(P(G).e("count-inner"))},T(P($e))+" / "+T(e.maxlength),3)],2)):k("v-if",!0),P(Ce)&&P(Se)&&P(we)?(E(),$(P(Z),{key:4,class:I([P(G).e("icon"),P(G).e("validateIcon"),P(G).is("loading","validating"===P(Ce))])},{default:N((()=>[(E(),$(R(P(Se))))])),_:1},8,["class"])):k("v-if",!0)],2)],2)):k("v-if",!0)],2),k(" append slot "),e.$slots.append?(E(),S("div",{key:1,class:I(P(G).be("group","append"))},[B(e.$slots,"append")],2)):k("v-if",!0)],64)):(E(),S(z,{key:1},[k(" textarea "),F("textarea",V({id:P(W),ref_key:"textarea",ref:ie,class:[P(J).e("inner"),P(G).is("focus",P(ge))]},P(i),{minlength:e.minlength,maxlength:e.maxlength,tabindex:e.tabindex,disabled:P(q),readonly:e.readonly,autocomplete:e.autocomplete,style:P(ze),"aria-label":e.ariaLabel,placeholder:e.placeholder,form:e.form,autofocus:e.autofocus,rows:e.rows,role:e.containerRole,onCompositionstart:P(He),onCompositionupdate:P(Ke),onCompositionend:P(We),onInput:Te,onFocus:P(ye),onBlur:P(be),onChange:Le,onKeydown:Ye}),null,16,["id","minlength","maxlength","tabindex","disabled","readonly","autocomplete","aria-label","placeholder","form","autofocus","rows","role","onCompositionstart","onCompositionupdate","onCompositionend","onFocus","onBlur"]),P(Be)?(E(),S("span",{key:0,style:L(pe.value),class:I(P(G).e("count"))},T(P($e))+" / "+T(e.maxlength),7)):k("v-if",!0)],64))],38))}}),[["__file","input.vue"]]));export{ye as E,he as a,me as b,se as i,xe as u};
